import{B as P,M as y,a as m,S as R,C as W,b as F,T as I,P as g,c as D,d as v,e as S,I as V,O as q,D as k,f as G,g as K,h as U,V as w,i as j,G as N,j as Q,k as X,l as Y}from"./index-CyXfg_qv.js";const r=window.__IWSDK_WORLD__,c=[],p=[],l=[],u=[],x=new WeakMap;let f=null;function Z(){if(!f){f=new N;const n=new Q;n.setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.7/"),f.setDRACOLoader(n)}return f}const M=new Map,$={TRIGGER:"xr-standard-trigger",SQUEEZE:"xr-standard-squeeze",THUMBSTICK:"xr-standard-thumbstick",A:"a-button",B:"b-button",X:"x-button",Y:"y-button"},C=new X(16777215,1);C.position.set(1,3,1);r.scene.add(C);c.push(C);const A=.5,H=new P(20,A,20),_=new y({transparent:!0,opacity:0}),b=new m(H,_);b.position.set(0,-A/2,0);r.scene.add(b);const T=r.createTransformEntity(b);T.addComponent(D,{state:g.Static});T.addComponent(v,{shape:S.Auto,restitution:.8,friction:.5});p.push(T);c.push(b);l.push(H);u.push(_);function B(n,e={}){const t=r.createTransformEntity(n);let o=g.Dynamic;return e.dynamic===!1&&(o=g.Static),e.kinematic&&(o=g.Kinematic),t.addComponent(D,{state:o,linearDamping:e.damping??0,angularDamping:e.angularDamping??0,gravityFactor:e.noGravity?0:1}),t.addComponent(v,{shape:S.Auto,restitution:e.restitution??(e.bouncy?.9:.5),density:e.density??(e.heavy?3:1),friction:e.friction??(e.slippery?.1:.5)}),e.grabbable!==!1&&e.dynamic!==!1&&(t.addComponent(V),e.directGrab?t.addComponent(q):t.addComponent(k,{movementMode:G.MoveFromTarget}),e.scalable&&t.addComponent(K)),p.push(t),x.set(n,t),t}function L(n,e){const t={};e.velocity&&(t.linearVelocity=e.velocity),e.impulse&&(t.force=e.impulse),e.angularVelocity&&(t.angularVelocity=e.angularVelocity),n.addComponent(U,t)}function z(n,e,t=.2){const[o,i,s]=Array.isArray(t)?t:[t,t,t],a=new P(o,i,s),d=new y({color:e,roughness:.4,metalness:.2}),h=new m(a,d);return h.position.set(...n),r.scene.add(h),c.push(h),l.push(a),u.push(d),h}function O(n,e,t=.1){const o=new R(t,32,32),i=new y({color:e,roughness:.3,metalness:.3}),s=new m(o,i);return s.position.set(...n),r.scene.add(s),c.push(s),l.push(o),u.push(i),s}function J(n,e,t=.1,o=.3){const i=new W(t,t,o,32),s=new y({color:e,roughness:.4,metalness:.4}),a=new m(i,s);return a.position.set(...n),r.scene.add(a),c.push(a),l.push(i),u.push(s),a}function ee(n,e,t=.1,o=.25){const i=new F(t,o,32),s=new y({color:e,roughness:.3,metalness:.4}),a=new m(i,s);return a.position.set(...n),r.scene.add(a),c.push(a),l.push(i),u.push(s),a}function ne(n,e,t=.1,o=.04){const i=new I(t,o,16,32),s=new y({color:e,roughness:.25,metalness:.6}),a=new m(i,s);return a.position.set(...n),r.scene.add(a),c.push(a),l.push(i),u.push(s),a}async function te(n,e,t=1){const o=`/models/${n}/model.glb`;let i=M.get(n);i||(i=(await Z().loadAsync(o)).scene,M.set(n,i));const s=i.clone();return e&&s.position.set(...e),s.scale.setScalar(t),r.scene.add(s),c.push(s),s}function oe(n,e,t={}){const{color:o=16776960,radius:i=.05,speed:s=10,lifetime:a=5e3}=t,d=O([n.x,n.y,n.z],o,i),h=B(d,{grabbable:!1,bouncy:!0}),E=e.clone().normalize().multiplyScalar(s);return L(h,{velocity:[E.x,E.y,E.z]}),setTimeout(()=>{try{d.parent&&d.parent.remove(d),h.destroy()}catch{}},a),d}function se(n="right"){return r.input.gamepads[n]}function ie(n="right"){const e=r.player.gripSpaces[n];if(!e)return new w(0,1,-.5);const t=new w;return e.getWorldPosition(t),t}function ae(n="right"){const e=r.player.raySpaces[n];if(!e)return new w(0,0,-1);const t=new w(0,0,-1);return e.getWorldDirection(t),t.negate()}function re(){const n=new w;return r.player.head.getWorldPosition(n),n}function ce(){const n=new w(0,0,-1);return r.player.head.getWorldDirection(n),n}function de(n){return x.get(n)||null}function le(n,e){const t=n instanceof w?n:n.position,o=e instanceof w?e:e.position;return t.distanceTo(o)}function ue(n){n.parent&&n.parent.remove(n);const e=c.indexOf(n);if(e!==-1){c.splice(e,1);const t=p[e];if(t){try{t.destroy()}catch{}p.splice(e,1)}}}function he(){window.__GAME_UPDATE__=null,c.forEach(e=>{e.parent&&e.parent.remove(e)}),p.forEach(e=>{try{e.destroy()}catch{}}),l.forEach(e=>e.dispose()),u.forEach(e=>e.dispose()),c.length=0,p.length=0,l.length=0,u.length=0;const n=r.getSystem(j);if(n){const e=n.queries.planeEntities;e?.results&&[...e.results].forEach(o=>{try{o.destroy()}catch{}});const t=n.queries.meshEntities;t?.results&&[...t.results].forEach(o=>{try{o.destroy()}catch{}})}}window.THREE=Y;window.world=r;window.meshes=c;window.entities=p;window.geometries=l;window.materials=u;window.Buttons=$;window.createBox=z;window.createSphere=O;window.createCylinder=J;window.createCone=ee;window.createTorus=ne;window.loadModel=te;window.addPhysics=B;window.applyForce=L;window.shoot=oe;window.remove=ue;window.getInput=se;window.getHandPosition=ie;window.getAimDirection=ae;window.getHeadPosition=re;window.getHeadDirection=ce;window.distance=le;window.getEntity=de;window.PhysicsState=g;window.PhysicsShapeType=S;window.MovementMode=G;console.log("âœ… Game helpers exported to window");export{$ as Buttons,G as MovementMode,S as PhysicsShapeType,g as PhysicsState,Y as THREE,B as addPhysics,L as applyForce,he as cleanup,z as createBox,ee as createCone,J as createCylinder,O as createSphere,ne as createTorus,le as distance,p as entities,l as geometries,ae as getAimDirection,de as getEntity,ie as getHandPosition,ce as getHeadDirection,re as getHeadPosition,se as getInput,te as loadModel,u as materials,c as meshes,ue as remove,oe as shoot,r as world};
